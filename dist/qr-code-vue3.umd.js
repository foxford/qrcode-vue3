(function(Q,x){typeof exports=="object"&&typeof module<"u"?x(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],x):(Q=typeof globalThis<"u"?globalThis:Q||self,x(Q.QRCodeVue3={},Q.Vue))})(this,(function(Q,x){"use strict";const nt={dot:"dot",square:"square"},Z={dot:"dot",square:"square",extraRounded:"extra-rounded"},G={dots:"dots",rounded:"rounded",classy:"classy",classyRounded:"classy-rounded",square:"square",extraRounded:"extra-rounded"},lt={Q:"Q"},ft={L:.07,M:.15,Q:.25,H:.3},dt={radial:"radial"},W={numeric:"Numeric",alphanumeric:"Alphanumeric",byte:"Byte"},ht=Array.from({length:41},(f,e)=>e).reduce((f,e)=>(f[e]=e,f),{});function gt({originalHeight:f,originalWidth:e,maxHiddenDots:n,maxHiddenAxisDots:t,dotSize:o}){const s={x:0,y:0},i={x:0,y:0};if(f<=0||e<=0||n<=0||o<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};const r=f/e;return s.x=Math.floor(Math.sqrt(n/r)),s.x<=0&&(s.x=1),t&&t<s.x&&(s.x=t),s.x%2===0&&s.x--,i.x=s.x*o,s.y=1+2*Math.ceil((s.x*r-1)/2),i.y=Math.round(i.x*r),(s.y*s.x>n||t&&t<s.y)&&(t&&t<s.y?(s.y=t,s.y%2===0&&s.x--):s.y-=2,i.y=s.y*o,s.x=1+2*Math.ceil((s.y/r-1)/2),i.x=Math.round(i.y/r)),{height:i.y,width:i.x,hideYDots:s.y,hideXDots:s.x}}function pt(f,e){const n=document.createElement("a");n.download=e,n.href=f,document.body.appendChild(n),n.click(),document.body.removeChild(n)}function wt(f){switch(!0){case/^\d*$/.test(f):return W.numeric;case/^[0-9A-Z $%*+\-./:]*$/.test(f):return W.alphanumeric;default:return W.byte}}const K=f=>!!f&&typeof f=="object"&&!Array.isArray(f);function X(f,...e){if(!e.length)return f;const n=e.shift();return n===void 0||!K(f)||!K(n)?f:(f={...f},Object.keys(n).forEach(t=>{const o=f[t],s=n[t];Array.isArray(o)&&Array.isArray(s)?f[t]=s:K(o)&&K(s)?f[t]=X(Object.assign({},o),s):f[t]=s}),X(f,...e))}function J(f){const e={...f};if(!e.colorStops||!e.colorStops.length)throw"Field 'colorStops' is required in gradient";return e.rotation?e.rotation=Number(e.rotation):e.rotation=0,e.colorStops=e.colorStops.map(n=>({...n,offset:Number(n.offset)})),e}function ot(f){const e={...f};return e.width=Number(e.width),e.height=Number(e.height),e.margin=Number(e.margin),e.imageOptions={...e.imageOptions,hideBackgroundDots:!!e.imageOptions.hideBackgroundDots,imageSize:Number(e.imageOptions.imageSize),margin:Number(e.imageOptions.margin)},e.margin>Math.min(e.width,e.height)&&(e.margin=Math.min(e.width,e.height)),e.dotsOptions={...e.dotsOptions},e.dotsOptions.gradient&&(e.dotsOptions.gradient=J(e.dotsOptions.gradient)),e.cornersSquareOptions&&(e.cornersSquareOptions={...e.cornersSquareOptions},e.cornersSquareOptions.gradient&&(e.cornersSquareOptions.gradient=J(e.cornersSquareOptions.gradient))),e.cornersDotOptions&&(e.cornersDotOptions={...e.cornersDotOptions},e.cornersDotOptions.gradient&&(e.cornersDotOptions.gradient=J(e.cornersDotOptions.gradient))),e.backgroundOptions&&(e.backgroundOptions={...e.backgroundOptions},e.backgroundOptions.gradient&&(e.backgroundOptions.gradient=J(e.backgroundOptions.gradient))),e}class _t{_context;_type;constructor({context:e,type:n}){this._context=e,this._type=n}draw(e,n,t,o){const s=this._context;switch(this._type){case nt.square:this._drawSquare({x:e,y:n,size:t,context:s,rotation:o});break;case nt.dot:default:this._drawDot({x:e,y:n,size:t,context:s,rotation:o})}}_rotateFigure({x:e,y:n,size:t,context:o,rotation:s,draw:i}){const r=e+t/2,a=n+t/2;o.moveTo(0,0),o.translate(r,a),s&&o.rotate(s),i(),o.closePath(),s&&o.rotate(-s),o.translate(-r,-a)}_drawDot(e){const{size:n,context:t}=e;this._rotateFigure({...e,draw:()=>{t.moveTo(0,0),t.arc(0,0,n/2,0,Math.PI*2)}})}_drawSquare(e){const{size:n,context:t}=e;this._rotateFigure({...e,draw:()=>{t.moveTo(0,0),t.rect(-n/2,-n/2,n,n)}})}}class mt{_context;_type;constructor({context:e,type:n}){this._context=e,this._type=n}draw(e,n,t,o){const s=this._context,i=this._type;let r;switch(i){case Z.square:r=this._drawSquare;break;case Z.extraRounded:r=this._drawExtraRounded;break;case Z.dot:default:r=this._drawDot}r.call(this,{x:e,y:n,size:t,context:s,rotation:o})}_rotateFigure({x:e,y:n,size:t,context:o,rotation:s,draw:i}){const r=e+t/2,a=n+t/2;o.translate(r,a),s&&o.rotate(s),i(),o.closePath(),s&&o.rotate(-s),o.translate(-r,-a)}_basicDot(e){const{size:n,context:t}=e,o=n/7;this._rotateFigure({...e,draw:()=>{t.arc(0,0,n/2,0,Math.PI*2),t.arc(0,0,n/2-o,0,Math.PI*2)}})}_basicSquare(e){const{size:n,context:t}=e,o=n/7;this._rotateFigure({...e,draw:()=>{t.rect(-n/2,-n/2,n,n),t.rect(-n/2+o,-n/2+o,n-2*o,n-2*o)}})}_basicExtraRounded(e){const{size:n,context:t}=e,o=n/7;this._rotateFigure({...e,draw:()=>{t.arc(-o,-o,2.5*o,Math.PI,-Math.PI/2),t.lineTo(o,-3.5*o),t.arc(o,-o,2.5*o,-Math.PI/2,0),t.lineTo(3.5*o,-o),t.arc(o,o,2.5*o,0,Math.PI/2),t.lineTo(-o,3.5*o),t.arc(-o,o,2.5*o,Math.PI/2,Math.PI),t.lineTo(-3.5*o,-o),t.arc(-o,-o,1.5*o,Math.PI,-Math.PI/2),t.lineTo(o,-2.5*o),t.arc(o,-o,1.5*o,-Math.PI/2,0),t.lineTo(2.5*o,-o),t.arc(o,o,1.5*o,0,Math.PI/2),t.lineTo(-o,2.5*o),t.arc(-o,o,1.5*o,Math.PI/2,Math.PI),t.lineTo(-2.5*o,-o)}})}_drawDot({x:e,y:n,size:t,context:o,rotation:s}){this._basicDot({x:e,y:n,size:t,context:o,rotation:s})}_drawSquare({x:e,y:n,size:t,context:o,rotation:s}){this._basicSquare({x:e,y:n,size:t,context:o,rotation:s})}_drawExtraRounded({x:e,y:n,size:t,context:o,rotation:s}){this._basicExtraRounded({x:e,y:n,size:t,context:o,rotation:s})}}class z{_context;_type;constructor({context:e,type:n}){this._context=e,this._type=n}draw(e,n,t,o){const s=this._context,i=this._type;let r;switch(i){case G.dots:r=this._drawDot;break;case G.classy:r=this._drawClassy;break;case G.classyRounded:r=this._drawClassyRounded;break;case G.rounded:r=this._drawRounded;break;case G.extraRounded:r=this._drawExtraRounded;break;case G.square:default:r=this._drawSquare}r.call(this,{x:e,y:n,size:t,context:s,getNeighbor:o})}_rotateFigure({x:e,y:n,size:t,context:o,rotation:s,draw:i}){const r=e+t/2,a=n+t/2;o.translate(r,a),s&&o.rotate(s),i(),o.closePath(),s&&o.rotate(-s),o.translate(-r,-a)}_basicDot(e){const{size:n,context:t}=e;this._rotateFigure({...e,draw:()=>{t.moveTo(0,0),t.arc(0,0,n/2,0,Math.PI*2)}})}_basicSquare(e){const{size:n,context:t}=e;this._rotateFigure({...e,draw:()=>{t.moveTo(0,0),t.rect(-n/2,-n/2,n,n)}})}_basicSideRounded(e){const{size:n,context:t}=e;this._rotateFigure({...e,draw:()=>{t.moveTo(0,0),t.arc(0,0,n/2,-Math.PI/2,Math.PI/2),t.lineTo(-n/2,n/2),t.lineTo(-n/2,-n/2),t.lineTo(0,-n/2)}})}_basicCornerRounded(e){const{size:n,context:t}=e;this._rotateFigure({...e,draw:()=>{t.moveTo(0,0),t.arc(0,0,n/2,-Math.PI/2,0),t.lineTo(n/2,n/2),t.lineTo(-n/2,n/2),t.lineTo(-n/2,-n/2),t.lineTo(0,-n/2)}})}_basicCornerExtraRounded(e){const{size:n,context:t}=e;this._rotateFigure({...e,draw:()=>{t.moveTo(0,0),t.arc(-n/2,n/2,n,-Math.PI/2,0),t.lineTo(-n/2,n/2),t.lineTo(-n/2,-n/2)}})}_basicCornersRounded(e){const{size:n,context:t}=e;this._rotateFigure({...e,draw:()=>{t.moveTo(0,0),t.arc(0,0,n/2,-Math.PI/2,0),t.lineTo(n/2,n/2),t.lineTo(0,n/2),t.arc(0,0,n/2,Math.PI/2,Math.PI),t.lineTo(-n/2,-n/2),t.lineTo(0,-n/2)}})}_basicCornersExtraRounded(e){const{size:n,context:t}=e;this._rotateFigure({...e,draw:()=>{t.moveTo(0,0),t.arc(-n/2,n/2,n,-Math.PI/2,0),t.arc(n/2,-n/2,n,Math.PI/2,Math.PI)}})}_drawDot({x:e,y:n,size:t,context:o}){this._basicDot({x:e,y:n,size:t,context:o,rotation:0})}_drawSquare({x:e,y:n,size:t,context:o}){this._basicSquare({x:e,y:n,size:t,context:o,rotation:0})}_drawRounded({x:e,y:n,size:t,context:o,getNeighbor:s}){const i=+s(-1,0),r=+s(1,0),a=+s(0,-1),_=+s(0,1),w=i+r+a+_;if(w===0){this._basicDot({x:e,y:n,size:t,context:o,rotation:0});return}if(w>2||i&&r||a&&_){this._basicSquare({x:e,y:n,size:t,context:o,rotation:0});return}if(w===2){let u=0;i&&a?u=Math.PI/2:a&&r?u=Math.PI:r&&_&&(u=-Math.PI/2),this._basicCornerRounded({x:e,y:n,size:t,context:o,rotation:u});return}if(w===1){let u=0;a?u=Math.PI/2:r?u=Math.PI:_&&(u=-Math.PI/2),this._basicSideRounded({x:e,y:n,size:t,context:o,rotation:u})}}_drawExtraRounded({x:e,y:n,size:t,context:o,getNeighbor:s}){const i=+s(-1,0),r=+s(1,0),a=+s(0,-1),_=+s(0,1),w=i+r+a+_;if(w===0){this._basicDot({x:e,y:n,size:t,context:o,rotation:0});return}if(w>2||i&&r||a&&_){this._basicSquare({x:e,y:n,size:t,context:o,rotation:0});return}if(w===2){let u=0;i&&a?u=Math.PI/2:a&&r?u=Math.PI:r&&_&&(u=-Math.PI/2),this._basicCornerExtraRounded({x:e,y:n,size:t,context:o,rotation:u});return}if(w===1){let u=0;a?u=Math.PI/2:r?u=Math.PI:_&&(u=-Math.PI/2),this._basicSideRounded({x:e,y:n,size:t,context:o,rotation:u})}}_drawClassy({x:e,y:n,size:t,context:o,getNeighbor:s}){const i=+s(-1,0),r=+s(1,0),a=+s(0,-1),_=+s(0,1);if(i+r+a+_===0){this._basicCornersRounded({x:e,y:n,size:t,context:o,rotation:Math.PI/2});return}if(!i&&!a){this._basicCornerRounded({x:e,y:n,size:t,context:o,rotation:-Math.PI/2});return}if(!r&&!_){this._basicCornerRounded({x:e,y:n,size:t,context:o,rotation:Math.PI/2});return}this._basicSquare({x:e,y:n,size:t,context:o,rotation:0})}_drawClassyRounded({x:e,y:n,size:t,context:o,getNeighbor:s}){const i=+s(-1,0),r=+s(1,0),a=+s(0,-1),_=+s(0,1);if(i+r+a+_===0){this._basicCornersRounded({x:e,y:n,size:t,context:o,rotation:Math.PI/2});return}if(!i&&!a){this._basicCornerExtraRounded({x:e,y:n,size:t,context:o,rotation:-Math.PI/2});return}if(!r&&!_){this._basicCornerExtraRounded({x:e,y:n,size:t,context:o,rotation:Math.PI/2});return}this._basicSquare({x:e,y:n,size:t,context:o,rotation:0})}}const F=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],U=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];class yt{_canvas;_options;_qr;_image;constructor(e){this._canvas=document.createElement("canvas"),this._canvas.width=e.width,this._canvas.height=e.height,this._options=e}get context(){return this._canvas.getContext("2d")}get width(){return this._canvas.width}get height(){return this._canvas.height}getCanvas(){return this._canvas}clear(){const e=this.context;e&&e.clearRect(0,0,this._canvas.width,this._canvas.height)}async drawQR(e){const n=e.getModuleCount(),t=Math.min(this._options.width,this._options.height)-this._options.margin*2,o=Math.floor(t/n);let s={hideXDots:0,hideYDots:0,width:0,height:0};if(this._qr=e,this._options.image){if(await this.loadImage(),!this._image)return;const{imageOptions:i,qrOptions:r}=this._options,a=i.imageSize*(ft[r.errorCorrectionLevel]??0),_=Math.floor(a*n*n);s=gt({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:_,maxHiddenAxisDots:n-14,dotSize:o})}this.clear(),this.drawBackground(),this.drawDots((i,r)=>!(this._options.imageOptions.hideBackgroundDots&&i>=(n-s.hideXDots)/2&&i<(n+s.hideXDots)/2&&r>=(n-s.hideYDots)/2&&r<(n+s.hideYDots)/2||F[i]?.[r]||F[i-n+7]?.[r]||F[i]?.[r-n+7]||U[i]?.[r]||U[i-n+7]?.[r]||U[i]?.[r-n+7])),this.drawCorners(),this._options.image&&this.drawImage({width:s.width,height:s.height,count:n,dotSize:o})}drawBackground(){const e=this.context,n=this._options;if(e){if(n.backgroundOptions.gradient){const t=n.backgroundOptions.gradient,o=this._createGradient({context:e,options:t,additionalRotation:0,x:0,y:0,size:this._canvas.width>this._canvas.height?this._canvas.width:this._canvas.height});t.colorStops.forEach(({offset:s,color:i})=>{o.addColorStop(s,i)}),e.fillStyle=o}else n.backgroundOptions.color&&(e.fillStyle=n.backgroundOptions.color);e.fillRect(0,0,this._canvas.width,this._canvas.height)}}drawDots(e){if(!this._qr)throw new Error("QR code is not defined");const n=this.context;if(!n)throw new Error("QR code is not defined");const t=this._options,o=this._qr.getModuleCount();if(o>t.width||o>t.height)throw new Error("The canvas is too small.");const s=Math.min(t.width,t.height)-t.margin*2,i=Math.floor(s/o),r=Math.floor((t.width-o*i)/2),a=Math.floor((t.height-o*i)/2),_=new z({context:n,type:t.dotsOptions.type});n.beginPath();for(let w=0;w<o;w++)for(let u=0;u<o;u++)e&&!e(w,u)||this._qr.isDark(w,u)&&_.draw(r+w*i,a+u*i,i,(g,y)=>w+g<0||u+y<0||w+g>=o||u+y>=o||e&&!e(w+g,u+y)?!1:!!this._qr&&this._qr.isDark(w+g,u+y));if(t.dotsOptions.gradient){const w=t.dotsOptions.gradient,u=this._createGradient({context:n,options:w,additionalRotation:0,x:r,y:a,size:o*i});w.colorStops.forEach(({offset:g,color:y})=>{u.addColorStop(g,y)}),n.fillStyle=n.strokeStyle=u}else t.dotsOptions.color&&(n.fillStyle=n.strokeStyle=t.dotsOptions.color);n.fill("evenodd")}drawCorners(e){if(!this._qr)throw new Error("QR code is not defined");const n=this.context;if(!n)throw new Error("QR code is not defined");const t=this._options,o=this._qr.getModuleCount(),s=Math.min(t.width,t.height)-t.margin*2,i=Math.floor(s/o),r=i*7,a=i*3,_=Math.floor((t.width-o*i)/2),w=Math.floor((t.height-o*i)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach(([u,g,y])=>{if(u===void 0||g===void 0||y===void 0||e&&!e(u,g))return;const A=_+u*i*(o-7),D=w+g*i*(o-7);if(t.cornersSquareOptions?.type){const P=new mt({context:n,type:t.cornersSquareOptions?.type});n.beginPath(),P.draw(A,D,r,y)}else{const P=new z({context:n,type:t.dotsOptions.type});n.beginPath();for(let C=0;C<F.length;C++)for(let k=0;k<(F[C]?.length??0);k++)F[C]?.[k]&&P.draw(A+C*i,D+k*i,i,(S,H)=>!!F[C+S]?.[k+H])}if(t.cornersSquareOptions?.gradient){const P=t.cornersSquareOptions.gradient,C=this._createGradient({context:n,options:P,additionalRotation:y,x:A,y:D,size:r});P.colorStops.forEach(({offset:k,color:S})=>{C.addColorStop(k,S)}),n.fillStyle=n.strokeStyle=C}else t.cornersSquareOptions?.color&&(n.fillStyle=n.strokeStyle=t.cornersSquareOptions.color);if(n.fill("evenodd"),t.cornersDotOptions?.type){const P=new _t({context:n,type:t.cornersDotOptions?.type});n.beginPath(),P.draw(A+i*2,D+i*2,a,y)}else{const P=new z({context:n,type:t.dotsOptions.type});n.beginPath();for(let C=0;C<U.length;C++)for(let k=0;k<(U[C]?.length??0);k++)U[C]?.[k]&&P.draw(A+C*i,D+k*i,i,(S,H)=>!!U[C+S]?.[k+H])}if(t.cornersDotOptions?.gradient){const P=t.cornersDotOptions.gradient,C=this._createGradient({context:n,options:P,additionalRotation:y,x:A+i*2,y:D+i*2,size:a});P.colorStops.forEach(({offset:k,color:S})=>{C.addColorStop(k,S)}),n.fillStyle=n.strokeStyle=C}else t.cornersDotOptions?.color&&(n.fillStyle=n.strokeStyle=t.cornersDotOptions.color);n.fill("evenodd")})}loadImage(){return new Promise((e,n)=>{const t=this._options,o=new Image;if(!t.image)return n(new Error("Image is not defined"));typeof t.imageOptions.crossOrigin=="string"&&(o.crossOrigin=t.imageOptions.crossOrigin),this._image=o,o.onload=()=>{e()},o.src=t.image})}drawImage({width:e,height:n,count:t,dotSize:o}){const s=this.context;if(!s)throw new Error("canvasContext is not defined");if(!this._image)throw new Error("image is not defined");const i=this._options,r=Math.floor((i.width-t*o)/2),a=Math.floor((i.height-t*o)/2),_=r+i.imageOptions.margin+(t*o-e)/2,w=a+i.imageOptions.margin+(t*o-n)/2,u=e-i.imageOptions.margin*2,g=n-i.imageOptions.margin*2;s.drawImage(this._image,_,w,u<0?0:u,g<0?0:g)}_createGradient({context:e,options:n,additionalRotation:t,x:o,y:s,size:i}){let r;if(n.type===dt.radial)r=e.createRadialGradient(o+i/2,s+i/2,0,o+i/2,s+i/2,i/2);else{const a=((n.rotation||0)+t)%(2*Math.PI),_=(a+2*Math.PI)%(2*Math.PI);let w=o+i/2,u=s+i/2,g=o+i/2,y=s+i/2;_>=0&&_<=.25*Math.PI||_>1.75*Math.PI&&_<=2*Math.PI?(w=w-i/2,u=u-i/2*Math.tan(a),g=g+i/2,y=y+i/2*Math.tan(a)):_>.25*Math.PI&&_<=.75*Math.PI?(u=u-i/2,w=w-i/2/Math.tan(a),y=y+i/2,g=g+i/2/Math.tan(a)):_>.75*Math.PI&&_<=1.25*Math.PI?(w=w+i/2,u=u+i/2*Math.tan(a),g=g-i/2,y=y-i/2*Math.tan(a)):_>1.25*Math.PI&&_<=1.75*Math.PI&&(u=u+i/2,w=w+i/2/Math.tan(a),y=y-i/2,g=g-i/2/Math.tan(a)),r=e.createLinearGradient(Math.round(w),Math.round(u),Math.round(g),Math.round(y))}return r}}const V=function(f,e){let o=f;const s=j[e];let i=null,r=0,a=null;const _=[],w={},u=function(l,p){r=o*4+17,i=(function(c){const h=new Array(c);for(let d=0;d<c;d+=1){h[d]=new Array(c);for(let m=0;m<c;m+=1)h[d][m]=null}return h})(r),g(0,0),g(r-7,0),g(0,r-7),D(),A(),C(l,p),o>=7&&P(l),a==null&&(a=H(o,s,_)),k(a,p)},g=function(l,p){for(let c=-1;c<=7;c+=1)if(!(l+c<=-1||r<=l+c))for(let h=-1;h<=7;h+=1)p+h<=-1||r<=p+h||(0<=c&&c<=6&&(h==0||h==6)||0<=h&&h<=6&&(c==0||c==6)||2<=c&&c<=4&&2<=h&&h<=4?i[l+c][p+h]=!0:i[l+c][p+h]=!1)},y=function(){let l=0,p=0;for(let c=0;c<8;c+=1){u(!0,c);const h=L.getLostPoint(w);(c==0||l>h)&&(l=h,p=c)}return p},A=function(){for(let l=8;l<r-8;l+=1)i[l][6]==null&&(i[l][6]=l%2==0);for(let l=8;l<r-8;l+=1)i[6][l]==null&&(i[6][l]=l%2==0)},D=function(){const l=L.getPatternPosition(o);for(let p=0;p<l.length;p+=1)for(let c=0;c<l.length;c+=1){const h=l[p],d=l[c];if(i[h][d]==null)for(let m=-2;m<=2;m+=1)for(let b=-2;b<=2;b+=1)m==-2||m==2||b==-2||b==2||m==0&&b==0?i[h+m][d+b]=!0:i[h+m][d+b]=!1}},P=function(l){const p=L.getBCHTypeNumber(o);for(let c=0;c<18;c+=1){const h=!l&&(p>>c&1)==1;i[Math.floor(c/3)][c%3+r-8-3]=h}for(let c=0;c<18;c+=1){const h=!l&&(p>>c&1)==1;i[c%3+r-8-3][Math.floor(c/3)]=h}},C=function(l,p){const c=s<<3|p,h=L.getBCHTypeInfo(c);for(let d=0;d<15;d+=1){const m=!l&&(h>>d&1)==1;d<6?i[d][8]=m:d<8?i[d+1][8]=m:i[r-15+d][8]=m}for(let d=0;d<15;d+=1){const m=!l&&(h>>d&1)==1;d<8?i[8][r-d-1]=m:d<9?i[8][15-d-1+1]=m:i[8][15-d-1]=m}i[r-8][8]=!l},k=function(l,p){let c=-1,h=r-1,d=7,m=0;const b=L.getMaskFunction(p);for(let O=r-1;O>0;O-=2)for(O==6&&(O-=1);;){for(let B=0;B<2;B+=1)if(i[h][O-B]==null){let T=!1;m<l.length&&(T=(l[m]>>>d&1)==1),b(h,O-B)&&(T=!T),i[h][O-B]=T,d-=1,d==-1&&(m+=1,d=7)}if(h+=c,h<0||r<=h){h-=c,c=-c;break}}},S=function(l,p){let c=0,h=0,d=0;const m=new Array(p.length),b=new Array(p.length);for(let M=0;M<p.length;M+=1){const I=p[M].dataCount,E=p[M].totalCount-I;h=Math.max(h,I),d=Math.max(d,E),m[M]=new Array(I);for(let q=0;q<m[M].length;q+=1)m[M][q]=255&l.getBuffer()[q+c];c+=I;const et=L.getErrorCorrectPolynomial(E),ct=$(m[M],et.getLength()-1).mod(et);b[M]=new Array(et.getLength()-1);for(let q=0;q<b[M].length;q+=1){const ut=q+ct.getLength()-b[M].length;b[M][q]=ut>=0?ct.getAt(ut):0}}let O=0;for(let M=0;M<p.length;M+=1)O+=p[M].totalCount;const B=new Array(O);let T=0;for(let M=0;M<h;M+=1)for(let I=0;I<p.length;I+=1)M<m[I].length&&(B[T]=m[I][M],T+=1);for(let M=0;M<d;M+=1)for(let I=0;I<p.length;I+=1)M<b[I].length&&(B[T]=b[I][M],T+=1);return B},H=function(l,p,c){const h=rt.getRSBlocks(l,p),d=it();for(let b=0;b<c.length;b+=1){const O=c[b];d.put(O.getMode(),4),d.put(O.getLength(),L.getLengthInBits(O.getMode(),l)),O.write(d)}let m=0;for(let b=0;b<h.length;b+=1)m+=h[b].dataCount;if(d.getLengthInBits()>m*8)throw"code length overflow. ("+d.getLengthInBits()+">"+m*8+")";for(d.getLengthInBits()+4<=m*8&&d.put(0,4);d.getLengthInBits()%8!=0;)d.putBit(!1);for(;!(d.getLengthInBits()>=m*8||(d.put(236,8),d.getLengthInBits()>=m*8));)d.put(17,8);return S(d,h)};w.addData=function(l,p){p=p||"Byte";let c=null;switch(p){case"Numeric":c=bt(l);break;case"Alphanumeric":c=Mt(l);break;case"Byte":c=xt(l);break;case"Kanji":c=Ct(l);break;default:throw"mode:"+p}_.push(c),a=null},w.isDark=function(l,p){if(l<0||r<=l||p<0||r<=p)throw l+","+p;return i[l][p]},w.getModuleCount=function(){return r},w.make=function(){if(o<1){let l=1;for(;l<40;l++){const p=rt.getRSBlocks(l,s),c=it();for(let d=0;d<_.length;d++){const m=_[d];c.put(m.getMode(),4),c.put(m.getLength(),L.getLengthInBits(m.getMode(),l)),m.write(c)}let h=0;for(let d=0;d<p.length;d++)h+=p[d].dataCount;if(c.getLengthInBits()<=h*8)break}o=l}u(!1,y())},w.createTableTag=function(l,p){l=l||2,p=typeof p>"u"?l*4:p;let c="";c+='<table style="',c+=" border-width: 0px; border-style: none;",c+=" border-collapse: collapse;",c+=" padding: 0px; margin: "+p+"px;",c+='">',c+="<tbody>";for(let h=0;h<w.getModuleCount();h+=1){c+="<tr>";for(let d=0;d<w.getModuleCount();d+=1)c+='<td style="',c+=" border-width: 0px; border-style: none;",c+=" border-collapse: collapse;",c+=" padding: 0px; margin: 0px;",c+=" width: "+l+"px;",c+=" height: "+l+"px;",c+=" background-color: ",c+=w.isDark(h,d)?"#000000":"#ffffff",c+=";",c+='"/>';c+="</tr>"}return c+="</tbody>",c+="</table>",c},w.createSvgTag=function(l,p,c,h){let d={};typeof arguments[0]=="object"&&(d=arguments[0],l=d.cellSize,p=d.margin,c=d.alt,h=d.title),l=l||2,p=typeof p>"u"?l*4:p,c=typeof c=="string"?{text:c}:c||{},c.text=c.text||null,c.id=c.text?c.id||"qrcode-description":null,h=typeof h=="string"?{text:h}:h||{},h.text=h.text||null,h.id=h.text?h.id||"qrcode-title":null;const m=w.getModuleCount()*l+p*2;let b,O,B,T,M="",I;for(I="l"+l+",0 0,"+l+" -"+l+",0 0,-"+l+"z ",M+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',M+=d.scalable?"":' width="'+m+'px" height="'+m+'px"',M+=' viewBox="0 0 '+m+" "+m+'" ',M+=' preserveAspectRatio="xMinYMin meet"',M+=h.text||c.text?' role="img" aria-labelledby="'+Y([h.id,c.id].join(" ").trim())+'"':"",M+=">",M+=h.text?'<title id="'+Y(h.id)+'">'+Y(h.text)+"</title>":"",M+=c.text?'<description id="'+Y(c.id)+'">'+Y(c.text)+"</description>":"",M+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',M+='<path d="',B=0;B<w.getModuleCount();B+=1)for(T=B*l+p,b=0;b<w.getModuleCount();b+=1)w.isDark(B,b)&&(O=b*l+p,M+="M"+O+","+T+I);return M+='" stroke="transparent" fill="black"/>',M+="</svg>",M},w.createDataURL=function(l,p){l=l||2,p=typeof p>"u"?l*4:p;const c=w.getModuleCount()*l+p*2,h=p,d=c-p;return kt(c,c,function(m,b){if(h<=m&&m<d&&h<=b&&b<d){const O=Math.floor((m-h)/l),B=Math.floor((b-h)/l);return w.isDark(B,O)?0:1}else return 1})},w.createImgTag=function(l,p,c){l=l||2,p=typeof p>"u"?l*4:p;const h=w.getModuleCount()*l+p*2;let d="";return d+="<img",d+=' src="',d+=w.createDataURL(l,p),d+='"',d+=' width="',d+=h,d+='"',d+=' height="',d+=h,d+='"',c&&(d+=' alt="',d+=Y(c),d+='"'),d+="/>",d};const Y=function(l){let p="";for(let c=0;c<l.length;c+=1){const h=l.charAt(c);switch(h){case"<":p+="&lt;";break;case">":p+="&gt;";break;case"&":p+="&amp;";break;case'"':p+="&quot;";break;default:p+=h;break}}return p},Rt=function(l){l=typeof l>"u"?2:l;const c=w.getModuleCount()*1+l*2,h=l,d=c-l;let m,b,O,B,T;const M={"██":"█","█ ":"▀"," █":"▄","  ":" "},I={"██":"▀","█ ":"▀"," █":" ","  ":" "};let E="";for(m=0;m<c;m+=2){for(O=Math.floor((m-h)/1),B=Math.floor((m+1-h)/1),b=0;b<c;b+=1)T="█",h<=b&&b<d&&h<=m&&m<d&&w.isDark(O,Math.floor((b-h)/1))&&(T=" "),h<=b&&b<d&&h<=m+1&&m+1<d&&w.isDark(B,Math.floor((b-h)/1))?T+=" ":T+="█",E+=l<1&&m+1>=d?I[T]:M[T];E+=`
`}return c%2&&l>0?E.substring(0,E.length-c-1)+Array(c+1).join("▀"):E.substring(0,E.length-1)};return w.createASCII=function(l,p){if(l=l||1,l<2)return Rt(p);l-=1,p=typeof p>"u"?l*2:p;const c=w.getModuleCount()*l+p*2,h=p,d=c-p;let m,b,O,B;const T=Array(l+1).join("██"),M=Array(l+1).join("  ");let I="",E="";for(m=0;m<c;m+=1){for(O=Math.floor((m-h)/l),E="",b=0;b<c;b+=1)B=1,h<=b&&b<d&&h<=m&&m<d&&w.isDark(O,Math.floor((b-h)/l))&&(B=0),E+=B?T:M;for(O=0;O<l;O+=1)I+=E+`
`}return I.substring(0,I.length-1)},w.renderTo2dContext=function(l,p){p=p||2;const c=w.getModuleCount();for(let h=0;h<c;h++)for(let d=0;d<c;d++)l.fillStyle=w.isDark(h,d)?"black":"white",l.fillRect(d*p,h*p,p,p)},w};V.stringToBytes=function(f){const e=[];for(let n=0;n<f.length;n+=1){const t=f.charCodeAt(n);e.push(t&255)}return e},V.createStringToBytes=function(f,e){const n=(function(){const o=Pt(f),s=function(){const a=o.read();if(a==-1)throw"eof";return a};let i=0;const r={};for(;;){const a=o.read();if(a==-1)break;const _=s(),w=s(),u=s(),g=String.fromCharCode(a<<8|_),y=w<<8|u;r[g]=y,i+=1}if(i!=e)throw i+" != "+e;return r})(),t=63;return function(o){const s=[];for(let i=0;i<o.length;i+=1){const r=o.charCodeAt(i);if(r<128)s.push(r);else{const a=n[o.charAt(i)];typeof a=="number"?(a&255)==a?s.push(a):(s.push(a>>>8),s.push(a&255)):s.push(t)}}return s}};const R={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},j={L:1,M:0,Q:3,H:2},v={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},L=(function(){const f=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],e=1335,n=7973,t=21522,o={},s=function(i){let r=0;for(;i!=0;)r+=1,i>>>=1;return r};return o.getBCHTypeInfo=function(i){let r=i<<10;for(;s(r)-s(e)>=0;)r^=e<<s(r)-s(e);return(i<<10|r)^t},o.getBCHTypeNumber=function(i){let r=i<<12;for(;s(r)-s(n)>=0;)r^=n<<s(r)-s(n);return i<<12|r},o.getPatternPosition=function(i){return f[i-1]},o.getMaskFunction=function(i){switch(i){case v.PATTERN000:return function(r,a){return(r+a)%2==0};case v.PATTERN001:return function(r,a){return r%2==0};case v.PATTERN010:return function(r,a){return a%3==0};case v.PATTERN011:return function(r,a){return(r+a)%3==0};case v.PATTERN100:return function(r,a){return(Math.floor(r/2)+Math.floor(a/3))%2==0};case v.PATTERN101:return function(r,a){return r*a%2+r*a%3==0};case v.PATTERN110:return function(r,a){return(r*a%2+r*a%3)%2==0};case v.PATTERN111:return function(r,a){return(r*a%3+(r+a)%2)%2==0};default:throw"bad maskPattern:"+i}},o.getErrorCorrectPolynomial=function(i){let r=$([1],0);for(let a=0;a<i;a+=1)r=r.multiply($([1,N.gexp(a)],0));return r},o.getLengthInBits=function(i,r){if(1<=r&&r<10)switch(i){case R.MODE_NUMBER:return 10;case R.MODE_ALPHA_NUM:return 9;case R.MODE_8BIT_BYTE:return 8;case R.MODE_KANJI:return 8;default:throw"mode:"+i}else if(r<27)switch(i){case R.MODE_NUMBER:return 12;case R.MODE_ALPHA_NUM:return 11;case R.MODE_8BIT_BYTE:return 16;case R.MODE_KANJI:return 10;default:throw"mode:"+i}else if(r<41)switch(i){case R.MODE_NUMBER:return 14;case R.MODE_ALPHA_NUM:return 13;case R.MODE_8BIT_BYTE:return 16;case R.MODE_KANJI:return 12;default:throw"mode:"+i}else throw"type:"+r},o.getLostPoint=function(i){const r=i.getModuleCount();let a=0;for(let u=0;u<r;u+=1)for(let g=0;g<r;g+=1){let y=0;const A=i.isDark(u,g);for(let D=-1;D<=1;D+=1)if(!(u+D<0||r<=u+D))for(let P=-1;P<=1;P+=1)g+P<0||r<=g+P||D==0&&P==0||A==i.isDark(u+D,g+P)&&(y+=1);y>5&&(a+=3+y-5)}for(let u=0;u<r-1;u+=1)for(let g=0;g<r-1;g+=1){let y=0;i.isDark(u,g)&&(y+=1),i.isDark(u+1,g)&&(y+=1),i.isDark(u,g+1)&&(y+=1),i.isDark(u+1,g+1)&&(y+=1),(y==0||y==4)&&(a+=3)}for(let u=0;u<r;u+=1)for(let g=0;g<r-6;g+=1)i.isDark(u,g)&&!i.isDark(u,g+1)&&i.isDark(u,g+2)&&i.isDark(u,g+3)&&i.isDark(u,g+4)&&!i.isDark(u,g+5)&&i.isDark(u,g+6)&&(a+=40);for(let u=0;u<r;u+=1)for(let g=0;g<r-6;g+=1)i.isDark(g,u)&&!i.isDark(g+1,u)&&i.isDark(g+2,u)&&i.isDark(g+3,u)&&i.isDark(g+4,u)&&!i.isDark(g+5,u)&&i.isDark(g+6,u)&&(a+=40);let _=0;for(let u=0;u<r;u+=1)for(let g=0;g<r;g+=1)i.isDark(g,u)&&(_+=1);const w=Math.abs(100*_/r/r-50)/5;return a+=w*10,a},o})(),N=(function(){const f=new Array(256),e=new Array(256);for(let t=0;t<8;t+=1)f[t]=1<<t;for(let t=8;t<256;t+=1)f[t]=f[t-4]^f[t-5]^f[t-6]^f[t-8];for(let t=0;t<255;t+=1)e[f[t]]=t;const n={};return n.glog=function(t){if(t<1)throw"glog("+t+")";return e[t]},n.gexp=function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return f[t]},n})(),$=function(f,e){if(typeof f.length>"u")throw f.length+"/"+e;const n=(function(){let o=0;for(;o<f.length&&f[o]==0;)o+=1;const s=new Array(f.length-o+e);for(let i=0;i<f.length-o;i+=1)s[i]=f[i+o];return s})(),t={};return t.getAt=function(o){return n[o]},t.getLength=function(){return n.length},t.multiply=function(o){const s=new Array(t.getLength()+o.getLength()-1);for(let i=0;i<t.getLength();i+=1)for(let r=0;r<o.getLength();r+=1)s[i+r]^=N.gexp(N.glog(t.getAt(i))+N.glog(o.getAt(r)));return $(s,0)},t.mod=function(o){if(t.getLength()-o.getLength()<0)return t;const s=N.glog(t.getAt(0))-N.glog(o.getAt(0)),i=new Array(t.getLength());for(let r=0;r<t.getLength();r+=1)i[r]=t.getAt(r);for(let r=0;r<o.getLength();r+=1)i[r]^=N.gexp(N.glog(o.getAt(r))+s);return $(i,0).mod(o)},t},rt=(function(){const f=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e=function(o,s){const i={};return i.totalCount=o,i.dataCount=s,i},n={},t=function(o,s){switch(s){case j.L:return f[(o-1)*4+0];case j.M:return f[(o-1)*4+1];case j.Q:return f[(o-1)*4+2];case j.H:return f[(o-1)*4+3];default:return}};return n.getRSBlocks=function(o,s){const i=t(o,s);if(typeof i>"u")throw"bad rs block @ typeNumber:"+o+"/errorCorrectionLevel:"+s;const r=i.length/3,a=[];for(let _=0;_<r;_+=1){const w=i[_*3+0],u=i[_*3+1],g=i[_*3+2];for(let y=0;y<w;y+=1)a.push(e(u,g))}return a},n})(),it=function(){const f=[];let e=0;const n={};return n.getBuffer=function(){return f},n.getAt=function(t){const o=Math.floor(t/8);return(f[o]>>>7-t%8&1)==1},n.put=function(t,o){for(let s=0;s<o;s+=1)n.putBit((t>>>o-s-1&1)==1)},n.getLengthInBits=function(){return e},n.putBit=function(t){const o=Math.floor(e/8);f.length<=o&&f.push(0),t&&(f[o]|=128>>>e%8),e+=1},n},bt=function(f){const e=R.MODE_NUMBER,n=f,t={};t.getMode=function(){return e},t.getLength=function(i){return n.length},t.write=function(i){const r=n;let a=0;for(;a+2<r.length;)i.put(o(r.substring(a,a+3)),10),a+=3;a<r.length&&(r.length-a==1?i.put(o(r.substring(a,a+1)),4):r.length-a==2&&i.put(o(r.substring(a,a+2)),7))};const o=function(i){let r=0;for(let a=0;a<i.length;a+=1)r=r*10+s(i.charAt(a));return r},s=function(i){if("0"<=i&&i<="9")return i.charCodeAt(0)-48;throw"illegal char :"+i};return t},Mt=function(f){const e=R.MODE_ALPHA_NUM,n=f,t={};t.getMode=function(){return e},t.getLength=function(s){return n.length},t.write=function(s){const i=n;let r=0;for(;r+1<i.length;)s.put(o(i.charAt(r))*45+o(i.charAt(r+1)),11),r+=2;r<i.length&&s.put(o(i.charAt(r)),6)};const o=function(s){if("0"<=s&&s<="9")return s.charCodeAt(0)-48;if("A"<=s&&s<="Z")return s.charCodeAt(0)-65+10;switch(s){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+s}};return t},xt=function(f){const e=R.MODE_8BIT_BYTE,n=V.stringToBytes(f),t={};return t.getMode=function(){return e},t.getLength=function(o){return n.length},t.write=function(o){for(let s=0;s<n.length;s+=1)o.put(n[s],8)},t},Ct=function(f){const e=R.MODE_KANJI,n=V.stringToBytes;(function(s,i){const r=n(s);if(r.length!=2||(r[0]<<8|r[1])!=i)throw"sjis not supported."})("友",38726);const t=n(f),o={};return o.getMode=function(){return e},o.getLength=function(s){return~~(t.length/2)},o.write=function(s){const i=t;let r=0;for(;r+1<i.length;){let a=(255&i[r])<<8|255&i[r+1];if(33088<=a&&a<=40956)a-=33088;else if(57408<=a&&a<=60351)a-=49472;else throw"illegal char at "+(r+1)+"/"+a;a=(a>>>8&255)*192+(a&255),s.put(a,13),r+=2}if(r<i.length)throw"illegal char at "+(r+1)},o},st=function(){const f=[],e={};return e.writeByte=function(n){f.push(n&255)},e.writeShort=function(n){e.writeByte(n),e.writeByte(n>>>8)},e.writeBytes=function(n,t,o){t=t||0,o=o||n.length;for(let s=0;s<o;s+=1)e.writeByte(n[s+t])},e.writeString=function(n){for(let t=0;t<n.length;t+=1)e.writeByte(n.charCodeAt(t))},e.toByteArray=function(){return f},e.toString=function(){let n="";n+="[";for(let t=0;t<f.length;t+=1)t>0&&(n+=","),n+=f[t];return n+="]",n},e},Ot=function(){let f=0,e=0,n=0,t="";const o={},s=function(r){t+=String.fromCharCode(i(r&63))},i=function(r){if(r<0)throw"n:"+r;if(r<26)return 65+r;if(r<52)return 97+(r-26);if(r<62)return 48+(r-52);if(r==62)return 43;if(r==63)return 47;throw"n:"+r};return o.writeByte=function(r){for(f=f<<8|r&255,e+=8,n+=1;e>=6;)s(f>>>e-6),e-=6},o.flush=function(){if(e>0&&(s(f<<6-e),f=0,e=0),n%3!=0){const r=3-n%3;for(let a=0;a<r;a+=1)t+="="}},o.toString=function(){return t},o},Pt=function(f){const e=f;let n=0,t=0,o=0;const s={};s.read=function(){for(;o<8;){if(n>=e.length){if(o==0)return-1;throw"unexpected end of file./"+o}const a=e.charAt(n);if(n+=1,a=="=")return o=0,-1;if(a.match(/^\s$/))continue;t=t<<6|i(a.charCodeAt(0)),o+=6}const r=t>>>o-8&255;return o-=8,r};const i=function(r){if(65<=r&&r<=90)return r-65;if(97<=r&&r<=122)return r-97+26;if(48<=r&&r<=57)return r-48+52;if(r==43)return 62;if(r==47)return 63;throw"c:"+r};return s},Dt=function(f,e){const n=f,t=e,o=new Array(f*e),s={};s.setPixel=function(_,w,u){o[w*n+_]=u},s.write=function(_){_.writeString("GIF87a"),_.writeShort(n),_.writeShort(t),_.writeByte(128),_.writeByte(0),_.writeByte(0),_.writeByte(0),_.writeByte(0),_.writeByte(0),_.writeByte(255),_.writeByte(255),_.writeByte(255),_.writeString(","),_.writeShort(0),_.writeShort(0),_.writeShort(n),_.writeShort(t),_.writeByte(0);const w=2,u=r(w);_.writeByte(w);let g=0;for(;u.length-g>255;)_.writeByte(255),_.writeBytes(u,g,255),g+=255;_.writeByte(u.length-g),_.writeBytes(u,g,u.length-g),_.writeByte(0),_.writeString(";")};const i=function(_){const w=_;let u=0,g=0;const y={};return y.write=function(A,D){if(A>>>D)throw"length over";for(;u+D>=8;)w.writeByte(255&(A<<u|g)),D-=8-u,A>>>=8-u,g=0,u=0;g=A<<u|g,u=u+D},y.flush=function(){u>0&&w.writeByte(g)},y},r=function(_){const w=1<<_,u=(1<<_)+1;let g=_+1;const y=a();for(let k=0;k<w;k+=1)y.add(String.fromCharCode(k));y.add(String.fromCharCode(w)),y.add(String.fromCharCode(u));const A=st(),D=i(A);D.write(w,g);let P=0,C=String.fromCharCode(o[P]);for(P+=1;P<o.length;){const k=String.fromCharCode(o[P]);P+=1,y.contains(C+k)?C=C+k:(D.write(y.indexOf(C),g),y.size()<4095&&(y.size()==1<<g&&(g+=1),y.add(C+k)),C=k)}return D.write(y.indexOf(C),g),D.write(u,g),D.flush(),A.toByteArray()},a=function(){const _={};let w=0;const u={};return u.add=function(g){if(u.contains(g))throw"dup key:"+g;_[g]=w,w+=1},u.size=function(){return w},u.indexOf=function(g){return _[g]},u.contains=function(g){return typeof _[g]<"u"},u};return s},kt=function(f,e,n){const t=Dt(f,e);for(let r=0;r<e;r+=1)for(let a=0;a<f;a+=1)t.setPixel(a,r,n(a,r));const o=st();t.write(o);const s=Ot(),i=o.toByteArray();for(let r=0;r<i.length;r+=1)s.writeByte(i[r]);return s.flush(),"data:image/gif;base64,"+s};V.stringToBytes;const at={width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:ht[0]??0,mode:void 0,errorCorrectionLevel:lt.Q},imageOptions:{hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:"square",color:"#000"},backgroundOptions:{color:"#fff"}};class tt{_options;_container;_canvas;_qr;_drawingPromise;constructor(e){this._options=e?ot(X(at,e)):at,this.update()}static _clearContainer(e){e&&(e.innerHTML="")}update(e){tt._clearContainer(this._container),this._options=e?ot(X(this._options,e)):this._options,this._options.data&&(this._qr=V(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||wt(this._options.data)),this._qr.make(),this._canvas=new yt(this._options),this._drawingPromise=this._canvas.drawQR(this._qr),this.append(this._container))}append(e){if(e){if(typeof e.appendChild!="function")throw"Container should be a single DOM node";this._canvas&&e.appendChild(this._canvas.getCanvas()),this._container=e}}async getImageUrl(e){return this._drawingPromise&&await this._drawingPromise===void 0&&this._canvas?this._canvas.getCanvas().toDataURL(`image/${e}`):""}download(e){this._drawingPromise&&this._drawingPromise.then(()=>{if(!this._canvas)return;const n=e,t=n.extension||"png",o=n.name||"qr",s=this._canvas.getCanvas().toDataURL(`image/${t}`);pt(s,`${o}.${t}`)})}}const Bt=["src"],It={key:1},Tt=x.defineComponent({__name:"QRCodeVue3Async",props:{value:{default:""},width:{default:300},height:{default:300},margin:{default:0},imgclass:{default:""},myclass:{default:""},downloadButton:{default:""},buttonName:{default:"Download"},qrOptions:{default:{typeNumber:0,mode:"Byte",errorCorrectionLevel:"Q"}},imageOptions:{default:{hideBackgroundDots:!0,imageSize:.4,margin:0}},dotsOptions:{default:{type:"dots",color:"#6a1a4c",gradient:{type:"linear",rotation:0,colorStops:[{offset:0,color:"#6a1a4c"},{offset:1,color:"#6a1a4c"}]}}},backgroundOptions:{default:{color:"#ffffff"}},cornersSquareOptions:{default:{type:"dot",color:"#000000"}},cornersDotOptions:{default:{type:void 0,color:"#000000"}},fileExt:{default:"png"},image:{default:""},download:{type:Boolean,default:!1},downloadOptions:{default:{name:"vqr",extension:"png"}}},async setup(f){let e,n;const t=f,o=new tt({data:t.value,width:t.width,height:t.height,margin:t.margin,qrOptions:t.qrOptions,imageOptions:t.imageOptions,dotsOptions:t.dotsOptions,backgroundOptions:t.backgroundOptions,image:t.image,cornersSquareOptions:t.cornersSquareOptions,cornersDotOptions:t.cornersDotOptions}),s=([e,n]=x.withAsyncContext(()=>o.getImageUrl(t.fileExt)),e=await e,n(),e);function i(){o.download(t.downloadOptions)}return(r,a)=>(x.openBlock(),x.createElementBlock("div",null,[x.unref(s)?(x.openBlock(),x.createElementBlock("div",{key:0,class:x.normalizeClass(f.myclass)},[x.createElementVNode("img",{src:x.unref(s),class:x.normalizeClass(f.imgclass),crossorigin:"anonymous"},null,10,Bt)],2)):x.createCommentVNode("",!0),x.unref(s)&&f.download?(x.openBlock(),x.createElementBlock("div",It,[x.createElementVNode("button",{class:x.normalizeClass(f.downloadButton),onClick:i},x.toDisplayString(f.buttonName),3)])):x.createCommentVNode("",!0)]))}}),At=x.defineComponent({__name:"QRCodeVue3",props:{value:{default:""},width:{default:300},height:{default:300},margin:{default:0},imgclass:{default:""},myclass:{default:""},downloadButton:{default:""},buttonName:{default:"Download"},qrOptions:{default:{typeNumber:0,mode:"Byte",errorCorrectionLevel:"Q"}},imageOptions:{default:{hideBackgroundDots:!0,imageSize:.4,margin:0}},dotsOptions:{default:{type:"dots",color:"#6a1a4c",gradient:{type:"linear",rotation:0,colorStops:[{offset:0,color:"#6a1a4c"},{offset:1,color:"#6a1a4c"}]}}},backgroundOptions:{default:{color:"#ffffff"}},cornersSquareOptions:{default:{type:"dot",color:"#000000"}},cornersDotOptions:{default:{type:void 0,color:"#000000"}},fileExt:{default:"png"},image:{default:""},download:{type:Boolean,default:!1},downloadOptions:{default:{name:"vqr",extension:"png"}}},setup(f){const e=f;return(n,t)=>(x.openBlock(),x.createBlock(x.Suspense,null,{default:x.withCtx(()=>[x.createVNode(Tt,{"background-options":e.backgroundOptions,"button-name":e.buttonName,"corners-dot-options":e.cornersDotOptions,"corners-square-options":e.cornersSquareOptions,"dots-options":e.dotsOptions,download:e.download,"download-button":e.downloadButton,"download-options":e.downloadOptions,"file-ext":e.fileExt,height:e.height,image:e.image,"image-options":e.imageOptions,imgclass:e.imgclass,margin:e.margin,value:e.value,myclass:e.myclass,"qr-options":e.qrOptions,width:e.width},null,8,["background-options","button-name","corners-dot-options","corners-square-options","dots-options","download","download-button","download-options","file-ext","height","image","image-options","imgclass","margin","value","myclass","qr-options","width"])]),_:1}))}});Q.QRCodeVue3=At,Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})}));
